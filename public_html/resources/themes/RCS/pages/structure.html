<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/resources/themes/RCS/pages/structure/style.css">
    <title>[PAGE_TITLE]</title>
    <script>
        function toggleMenu() {
            var el1 = document.getElementById("account");
            var el2 = document.getElementById("account_menu");

            el1.classList.toggle("active");
            el2.classList.toggle("open");
            hideOnClickOutside();

        }

        function hideOnClickOutside() {
            var el1 = document.getElementById("account");
            var el2 = document.getElementById("account_menu");

            const outsideClickListener = event => {
                if ((!el1.contains(event.target) && el1.classList.contains("active")) 
                    && (!el2.contains(event.target) && el2.classList.contains("open"))) {
                    el1.classList.remove("active");
                    el2.classList.remove("open");
                    removeClickListener();
                }
            }

            const removeClickListener = () => {
                document.removeEventListener('mouseup', outsideClickListener);
            }

            document.addEventListener('mouseup', outsideClickListener);
        }
    </script>
</head>

<body>
    <header id="page_header">
        <div id="headbar">
            <img src="/resources/themes/RCS/images/svg/logo.svg" alt="logo" class="logo">
            <div id="account" onclick="toggleMenu('account', 'account_menu')">
                <span class="name">[USER_NAME]</span>
                <img class="avatar">
                <div id="account_menu">
                    [USER_MENU]
                </div>
            </div>
        </div>
    </header>
    <div id="main_wrapper">
        <nav>
            [MAIN_MENU]
        </nav>
        <main>
            [PAGE_CONTENT]
        </main>
    </div>
    <footer>
        <a href="https://github.com/LoneSimba/RCSE">RussianCraft Site Engine ver. indev</a>
        <a href="http://russiancraft.su">RussianCraft Studio 2015-2019</a>
    </footer>
</body>

</html>