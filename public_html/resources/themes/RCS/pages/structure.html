<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="structure/structure.css">
    <title>Document</title>
    <script>
        function toggleMenu() {
            var el1 = document.getElementById("account");
            var el2 = document.getElementById("account_menu");

            el1.classList.toggle("active");
            el2.classList.toggle("open");
            hideOnClickOutside();

        }

        function hideMenu(element1, element2) {
            var el1 = document.getElementById(element1);
            var el2 = document.getElementById(element2);
            var classList1 = el1.className.split(' ');
            var classList2 = el2.className.split(' ');
            var existingIndex1 = classList1.indexOf("active");
            var existingIndex2 = classList2.indexOf("open");

            classList1.splice(existingIndex1, 1);
            classList2.splice(existingIndex2, 1);

            el1.className = classList1.join(' ');
            el2.className = classList2.join(' ');
        }

        function showMenu(element1, element2) {
            var el1 = document.getElementById(element1);
            var el2 = document.getElementById(element2);
            var classList1 = el1.className.split(' ');
            var classList2 = el2.className.split(' ');
            var existingIndex1 = classList1.indexOf("active");
            var existingIndex2 = classList2.indexOf("open");

            classList1.push("active");
            classList2.push("open");

            el1.className = classList1.join(' ');
            el2.className = classList2.join(' ');

            hideOnClickOutside(element2);
        }

        function hideOnClickOutside() {
            var el1 = document.getElementById("account");
            var el2 = document.getElementById("account_menu");

            const outsideClickListener = event => {
                if ((!el1.contains(event.target) && el1.classList.contains("active")) 
                    && (!el2.contains(event.target) && el2.classList.contains("open"))) {
                    el1.classList.remove("active");
                    el2.classList.remove("open");
                    removeClickListener();
                }
            }

            const removeClickListener = () => {
                document.removeEventListener('mouseup', outsideClickListener);
            }

            document.addEventListener('mouseup', outsideClickListener);
        }
    </script>
</head>

<body>
    <header>
        <div id="headbar">
            <img src="../images/svg/logo.svg" alt="logo" class="logo">
            <div id="account" onclick="toggleMenu('account', 'account_menu')">
                <span class="name">Name</span>
                <img src="" alt="avatar" class="avatar">
                <div id="account_menu">
                    <ul>
                        <li class="account_menu_button first"><span class="account_menu_button_text">Личный кабинет</span></li>
                        <li class="account_menu_button"><span class="account_menu_button_text">Настройки</span></li>
                        <li class="account_menu_button"><span class="account_menu_button_text">Вопросы</span></li>
                        <li class="account_menu_button last"><span class="account_menu_button_text">Выход</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
    <div id="main_wrapper">
        <nav>
            <ul>
                <li class="menu_button"><a href="/"><span class="menu_button_text"><span>Главная</span></span><span
                            class="menu_button_icon home"></span></a></li>
            </ul>
        </nav>
        <main></main>
    </div>
    <footer></footer>
</body>

</html>